sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";var t;var o=this;var n;var a;return{onAfterItemAdded:function(e){debugger;var o=e.oSource.getModel().getServiceUrl();var a=e.getParameter("item");var i=window.location.href;const r=/lUuid=([a-fA-F0-9-]+)/;const g=i.match(r);if(g){n=g[1];console.log(n)}else{console.log("Number not found in URL")}var s=async function(e){var a={mediaType:e.getMediaType(),fileName:e.getFileName(),size:e.getFileObject().size,fkey:n};debugger;var i={url:o+`lectures(lUuid=${n},IsActiveEntity=false)/lectofile`,method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(a)};await new Promise((e,o)=>{debugger;$.ajax(i).done((o,n,a)=>{debugger;t=o.id;e(o)}).fail(e=>{o(e)})})};s(a).then(e=>{debugger;var n=o+`Files(id=${t},IsActiveEntity=false)/content`;t=null;a.setUploadUrl(n);a.setUrl(n);var i=this.byId("upload");i.setHttpRequestMethod("PUT");i.uploadItem(a)}).catch(e=>{console.log(e)})},onOpenPressed:async function(e){debugger;var t;var o=e.oSource.getModel().getServiceUrl();var n=e.oSource.mProperties.url;var a=this._view.mAggregations.content[0].mAggregations.sections[0].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[1].mAggregations.content.mAggregations.sideContent[0].mAggregations.items[1];var i=this._view.mAggregations.content[0].mAggregations.sections[0].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[1].mAggregations.content.mAggregations.sideContent[0].mAggregations.items[0].mAggregations.items[0].setText("Close");var r=this._view.mAggregations.content[0].mAggregations.sections[0].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[1].mAggregations.content.mAggregations.sideContent[0].mAggregations.items[1].mProperties.visible;if(!n.startsWith(o)){n=o+n.substring(1);e.oSource.mProperties.url=n}var g=`https://port4004-workspaces-ws-blv5f.us10.trial.applicationstudio.cloud.sap`+n;a.setSource(g);this.showSideContent("GeneratedFacet1")},onUploadCompleted:function(e){debugger;var t=this.byId("upload");t.removeAllIncompleteItems()},afterItemRemoved:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();debugger;const o=/^(.*?),IsActiveEntity=/;let n=e.mParameters.item.mProperties.url.match(o);let a=n[1]+",IsActiveEntity=false)";$.ajax({url:t+a,method:"DELETE"})},formatThumbnailUrl:function(e){debugger;var t;switch(e){case"image/png":t="sap-icon://card";break;case"text/plain":t="sap-icon://document-text";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t="sap-icon://excel-attachment";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":t="sap-icon://doc-attachment";break;case"application/pdf":t="sap-icon://pdf-attachment";break;default:t="sap-icon://attachment"}return t}}});
//# sourceMappingURL=Attachments.js.map